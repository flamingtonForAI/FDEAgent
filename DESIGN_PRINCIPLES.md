# Ontology Assistant 设计原则

> 本文档记录产品定位、设计决策和工作流程规范

## 1. 产品定位

### 1.1 核心定义

**Ontology Assistant（本体架构师）** 是一个辅助 FDE（现场交付工程师）/ 咨询顾问的 AI 工具。

```
目标用户：FDE、咨询顾问、解决方案架构师
核心价值：加速从调研到交付的端到端设计流程
边界定义：设计与文档输出，不包含实际系统开发
```

### 1.2 能做什么 vs 不做什么

| 能做什么 | 不做什么 |
|---------|---------|
| 需求调研与收集 | 编写实际业务代码 |
| Ontology 建模（Objects/Links/Actions） | 部署 Ontology 到生产环境 |
| 数据集成方案设计 | 实际开发集成接口 |
| AI 增强点规划 | 训练 ML 模型 |
| 生成设计文档、API 规范、Agent Tool 规范 | 运行 Agent 执行业务逻辑 |
| 输出实施路线图和风险评估 | 项目管理和进度跟踪 |

### 1.3 在交付流程中的位置

```
客户项目生命周期：

  需求调研  →  方案设计  →  开发实施  →  部署上线  →  运维优化
     ↑            ↑
     └────────────┴──── Ontology Assistant 覆盖范围
```

---

## 2. 四阶段工作流程

基于 Ontology 三层架构 + AI 能力叠加的方法论，定义四个核心工作阶段：

```
┌─────────────────────────────────────────────────────────────────────────┐
│                         Ontology Assistant 工作流                        │
├───────────┬───────────┬───────────────┬─────────────────────────────────┤
│  1. 发现   │  2. 建模   │   3. 集成      │      4. 智能化                   │
│ Discovery │ Modeling  │ Integration   │   AI Enhancement               │
├───────────┼───────────┼───────────────┼─────────────────────────────────┤
│ 需求勘察   │ 本体设计   │ 数据源对接规划  │   AI 增强方向设计                 │
└───────────┴───────────┴───────────────┴─────────────────────────────────┘
```

### 2.1 阶段一：发现 (Discovery)

**目标**：通过对话收集业务需求，理解现状和痛点

**做什么**：
- 对话式需求收集
- 多模态文件分析（PDF、Excel、PPT、图片）
- 自动提取 Noun（对象）和 Verb（动作）
- 识别业务痛点和改进机会

**输出物**：
- 需求摘要
- 痛点清单
- 现有系统现状
- 初步识别的 Objects 和 Actions

**质量检查点**：
- [ ] 至少 2 轮对话
- [ ] 讨论了业务流程
- [ ] 识别了至少 2 个 Objects
- [ ] 识别了至少 1 个 Action

---

### 2.2 阶段二：建模 (Modeling)

**目标**：定义 Ontology 核心要素（Objects、Links、Actions）

**做什么**：
- 定义业务对象（Objects）及其属性
- 定义对象间关系（Links）
- 定义业务操作（Actions）及三层规范：
  - 业务层：谁、做什么、何时
  - 逻辑层：前置条件、参数、后置状态
  - 实现层：API 端点、Agent Tool 规范

**输出物**：
- Ontology 定义文档
- Objects 清单（含属性定义）
- Links 关系图
- Actions 三层规范

**质量检查点**：
- [ ] 至少 2 个 Objects
- [ ] 70% 以上 Objects 有完整描述和属性
- [ ] 定义了对象间关系
- [ ] 至少 1 个 Action 有完整三层定义

---

### 2.3 阶段三：集成 (Integration)

**目标**：规划数据源对接和系统集成方案

**涵盖内容**：
1. **内部集成**：新建系统内部各模块的数据流
2. **外部集成**：与现有系统（ERP、MES、IoT 等）的对接
3. **数据映射**：源系统字段到 Ontology 属性的映射

**做什么**：
- 识别数据源（ERP、数据库、API、文件等）
- 设计数据连接器（Connectors）
- 定义字段映射规则
- 规划同步策略（实时、批量、增量）
- 设计冲突解决机制

**输出物**：
- 系统架构图
- 数据源清单
- 集成方案文档
- API 规范（OpenAPI 3.0）
- 数据映射表
- 同步策略说明

**质量检查点**：
- [ ] 识别了所有数据源
- [ ] 每个数据源有连接方式定义
- [ ] 关键字段有映射关系
- [ ] 定义了同步频率

---

### 2.4 阶段四：智能化 (AI Enhancement)

**目标**：设计 AI 能力增强方向，规划智能化路径

**重要说明**：
> 本阶段是**设计** AI 增强点，而非**实现** AI 功能。
> 输出物是给开发团队的规范和建议，而非可运行的 AI 系统。

**涵盖内容**：

#### 4.1 Smart Properties（智能属性）
- 哪些属性可以通过 ML 模型派生
- 模型类型建议（分类、回归、NLP 等）
- 输入特征和训练数据来源

```
示例：
  属性：Work Order.onTimeRisk (0-1)
  类型：回归预测
  输入：历史完成时间、当前负载、设备状态
  模型：XGBoost / LightGBM
```

#### 4.2 AI-Assisted Actions（AI 辅助动作）
- 哪些 Actions 可以由 AI 增强
- AI 的角色（建议、自动执行、人工审批）
- 算法/模型选型建议

```
示例：
  动作：AI Schedule（智能排程）
  AI角色：生成建议，人工确认
  算法：约束优化 + 启发式搜索
  治理：需要主管审批
```

#### 4.3 Agent Tool 规范
- 将 Actions 转换为 Agent 可调用的工具
- 定义工具接口（参数、返回值）
- 指定治理要求（权限、审批、风险等级）

```
示例：
  工具名：schedule_work_orders
  参数：work_order_ids[], horizon_days, objective
  返回：schedule_plan{}
  权限：Tier 2 (Manager)
  风险：Medium
```

#### 4.4 Human-in-the-Loop 设计
- 哪些决策需要人工参与
- 审批流程设计
- 异常处理机制

**输出物**：
- AI 增强点清单
- Smart Properties 规范
- AI-Assisted Actions 设计
- Agent Tool 定义（多格式：OpenAI、LangChain、Claude、MCP）
- 治理矩阵（权限、审批、风险）
- AI 实施路线图建议

**质量检查点**：
- [ ] 识别了 AI 增强机会
- [ ] 定义了 Smart Properties
- [ ] 至少 1 个 AI-Assisted Action
- [ ] Agent Tool 规范完整
- [ ] 治理要求明确

---

## 3. 方法论核心

### 3.1 Ontology 三层架构 + AI 能力叠加

```
┌─────────────────────────────────────────────────────────────────┐
│          AI Capability Overlay（AI 能力叠加）                    │
│   不是第四层，而是增强层                                          │
│   • Smart Properties - 智能属性                                  │
│   • AI-Assisted Actions - AI 辅助动作                           │
│   • Agent Tools - Agent 工具规范                                │
└─────────────────────────────────────────────────────────────────┘
                              ↓ 增强
┌─────────────────────────────────────────────────────────────────┐
│          Dynamic Layer（动态层）                                 │
│   能做什么 - Actions, Workflows, Rules                          │
│   回答：系统能执行什么操作？状态如何转换？                          │
└─────────────────────────────────────────────────────────────────┘
                              ↓ 驱动
┌─────────────────────────────────────────────────────────────────┐
│          Kinetic Layer（动力层）                                 │
│   数据从哪来 - Connectors, Mappings, Sync                       │
│   回答：数据源是什么？如何同步？字段如何映射？                      │
└─────────────────────────────────────────────────────────────────┘
                              ↓ 支撑
┌─────────────────────────────────────────────────────────────────┐
│          Semantic Layer（语义层）                                │
│   业务概念是什么 - Objects, Properties, Links                   │
│   回答：有哪些业务实体？它们有什么属性？如何关联？                   │
└─────────────────────────────────────────────────────────────────┘
```

### 3.2 Decision-First 原则

> 如果一个 Object 或 Action 不直接支持用户的操作决策，就不应该在核心 Ontology 中。

**传统方法（Data-First）**：
```
数据库表 → CRUD 操作 → 期望业务逻辑浮现 ❌
```

**正确方法（Decision-First）**：
```
关键决策 → 支持动作 → 所需对象 → 必要属性 ✓
```

**实践流程**：
1. 识别关键决策："我们应该补货吗？""是否批准这个订单？"
2. 映射到 Actions：`ReorderProduct()`、`ApproveOrder()`
3. 定义前置条件：`quantity < reorderPoint`
4. 发现需要的 Objects：Product、Inventory、Order
5. 只添加支持决策的属性

### 3.3 Action 的三重身份

每个 Action 同时是：

| 身份 | 面向 | 定义内容 |
|-----|------|---------|
| **业务操作** | 业务用户 | 谁、做什么、何时、为什么 |
| **API 端点** | 开发者 | HTTP 方法、路径、参数、响应 |
| **Agent 工具** | AI Agent | 工具名、描述、参数 schema |

**优势**：一次定义，三处可用，保证一致性。

---

## 4. 术语规范

### 4.1 保留的方法论术语

以下术语是 Ontology 方法论的核心概念，应保留使用：

- **Object** - 业务对象/实体
- **Link** - 对象间关系
- **Action** - 业务操作/动作
- **Ontology** - 本体（整体概念模型）
- **Decision-First** - 决策优先原则
- **Three-Layer Architecture** - 三层架构
- **AI Capability Overlay** - AI 能力叠加
- **Smart Properties** - 智能属性
- **Human-in-the-Loop** - 人在环中

### 4.2 通用化的术语

以下术语已通用化，不绑定特定产品：

| 原术语 | 通用术语 |
|-------|---------|
| Foundry | Data Platform（数据平台） |
| AIP | AI Enhancement（AI 增强） |
| Gotham | Analytics Platform（分析平台） |

---

## 5. 导航结构

### 5.1 主导航

```
设计流程
├── 1. 发现      → ChatInterface（对话收集）
├── 2. 建模      → OntologyModeler
│   ├── 概览     → 卡片式 Objects/Actions/Links 总览
│   ├── 业务     → 业务语义视角
│   └── 技术     → API 实现视角
├── 3. 集成      → SystemIntegration
│   ├── 架构     → 系统架构图（SystemMap）
│   └── 导出     → 集成方案文档
└── 4. 智能化    → AIEnhancement（待重构）
    ├── AI矩阵   → AI 增强点总览
    └── 导出     → Agent Tool 规范

参考资源
├── 学习中心    → Academy（课程 + 练习）
└── 行业原型    → ArchetypeBrowser（模板库）
```

### 5.2 每个阶段的导出功能

每个阶段右上角应有导出按钮，输出对应阶段的交付物：

| 阶段 | 导出内容 |
|------|---------|
| 发现 | 需求摘要（Markdown） |
| 建模 | Ontology 定义（JSON/Markdown/Mermaid） |
| 集成 | API 规范（OpenAPI）、集成方案（Markdown） |
| 智能化 | Agent Tool（多格式）、AI 路线图（Markdown） |

---

## 6. 变更记录

| 日期 | 变更内容 |
|-----|---------|
| 2026-02-02 | 创建文档，定义四阶段工作流程 |
| 2026-02-02 | 明确产品定位：辅助 FDE 设计，不做实际开发 |
| 2026-02-02 | 区分"集成"（数据对接规划）和"智能化"（AI 增强设计） |
| 2026-02-02 | 定义术语规范，保留方法论术语，通用化产品术语 |

---

## 附录：与 Ontology 方法论的对应关系

```
方法论阶段          →  Assistant 阶段
─────────────────────────────────────
Discovery           →  1. 发现
Structure           →  2. 建模（Objects/Links）
Refine              →  2. 建模（Actions 三层定义）
Kinetic Layer       →  3. 集成
AI Overlay          →  4. 智能化
Deliver             →  各阶段的导出功能
```
