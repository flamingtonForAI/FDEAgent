# æ™ºèƒ½è¡Œä¸šåŸå‹å¯¼å…¥å¼•æ“ / Intelligent Archetype Import Engine

> ç‰ˆæœ¬: 1.1.2
> æ›´æ–°æ—¥æœŸ: 2026-02-03
> çŠ¶æ€: å¾…å®¡æŸ¥ (Pending Review)

---

## 1. åŠŸèƒ½æ¦‚è¿° / Overview

### 1.1 èƒŒæ™¯ä¸ç›®æ ‡

åŸå‹åº“ï¼ˆArchetype Libraryï¼‰æ˜¯ Ontology Assistant çš„æ ¸å¿ƒèµ„äº§ï¼Œæä¾›å¯å¤ç”¨çš„è¡Œä¸šè§£å†³æ–¹æ¡ˆæ¨¡æ¿ã€‚ç›®å‰åŸå‹åº“ä»…æ”¯æŒ**é™æ€åŸå‹**ï¼ˆéšä»£ç å‘å¸ƒï¼‰ï¼Œå­˜åœ¨ä»¥ä¸‹é™åˆ¶ï¼š

- æ–°å¢è¡Œä¸šåŸå‹éœ€è¦å¼€å‘äººå‘˜æ‰‹åŠ¨ç¼–å†™
- ç”¨æˆ·æ— æ³•æ ¹æ®è‡ªèº«éœ€æ±‚å¿«é€Ÿè·å–ç‰¹å®šè¡Œä¸šçš„åŸå‹
- åŸå‹åº“æ‰©å±•é€Ÿåº¦å—é™äºå¼€å‘èµ„æº

**æ™ºèƒ½è¡Œä¸šåŸå‹å¯¼å…¥å¼•æ“**æ—¨åœ¨è§£å†³ä¸Šè¿°é—®é¢˜ï¼Œå…è®¸ç”¨æˆ·é€šè¿‡è¾“å…¥è¡Œä¸šåç§°ï¼Œè‡ªåŠ¨ç”Ÿæˆæˆ–å¯¼å…¥è¡Œä¸šåŸå‹ã€‚

### 1.2 æ–¹æ³•è®ºå®šä½ / Methodology Position

> **æ ¸å¿ƒå®šä½**: åŸå‹å¯¼å…¥æ˜¯ **å‘ç°é˜¶æ®µçš„åŠ é€Ÿå™¨**ï¼Œå¯¼å…¥å **è‡ªåŠ¨è¿›å…¥å»ºæ¨¡é˜¶æ®µ**ã€‚

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Ontology è®¾è®¡æ–¹æ³•è®ºå››é˜¶æ®µ                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                         â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚   â”‚ å‘ç°é˜¶æ®µ â”‚ â”€â–¶ â”‚ å»ºæ¨¡é˜¶æ®µ â”‚ â”€â–¶ â”‚ é›†æˆé˜¶æ®µ â”‚ â”€â–¶ â”‚ äº¤ä»˜é˜¶æ®µ â”‚        â”‚
â”‚   â”‚ Discover â”‚    â”‚  Model   â”‚    â”‚Integrate â”‚    â”‚ Deliver  â”‚        â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚        â”‚                â–²                                              â”‚
â”‚        â”‚                â”‚                                              â”‚
â”‚        â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                  â”‚
â”‚        â””â”€â”€â”€â–¶â”‚   åŸå‹å¯¼å…¥ (åŠ é€Ÿå™¨)    â”‚                                  â”‚
â”‚             â”‚ Archetype Import      â”‚                                  â”‚
â”‚             â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                  â”‚
â”‚                                                                         â”‚
â”‚   åŸå‹å¯¼å…¥ = è·³è¿‡"ä»é›¶å¼€å§‹å¯¹è¯æå–å®ä½“"                                    â”‚
â”‚            + è·å¾—è¡Œä¸šæœ€ä½³å®è·µèµ·ç‚¹                                         â”‚
â”‚            + è‡ªåŠ¨è¿›å…¥å»ºæ¨¡é˜¶æ®µè¿›è¡Œå®šåˆ¶                                      â”‚
â”‚                                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ä¸ä¼ ç»Ÿå‘ç°é˜¶æ®µçš„å¯¹æ¯”**:

| è·¯å¾„ | å‘ç°é˜¶æ®µå·¥ä½œ | äº§å‡º | é€‚ç”¨åœºæ™¯ |
|------|-------------|------|----------|
| **ä¼ ç»Ÿè·¯å¾„** | å¤šè½®å¯¹è¯ â†’ æå–å®ä½“ â†’ AI ç”Ÿæˆ | å®šåˆ¶åŒ– Ontology | ç‹¬ç‰¹ä¸šåŠ¡åœºæ™¯ |
| **åŸå‹åŠ é€Ÿ** | é€‰æ‹©/ç”Ÿæˆè¡Œä¸šåŸå‹ â†’ å¯¼å…¥ | è¡Œä¸šæœ€ä½³å®è·µ | æ ‡å‡†è¡Œä¸šåœºæ™¯ |

**é‡è¦è¯´æ˜**:
- å¯¼å…¥åŸå‹åï¼Œç”¨æˆ·è¿›å…¥ **å»ºæ¨¡é˜¶æ®µ** è¿›è¡Œå®šåˆ¶ï¼Œè€Œéé‡æ–°å¼€å§‹å‘ç°
- åŸå‹ä¸­çš„ Objects/Actions/Links å¯åœ¨å»ºæ¨¡é˜¶æ®µå¢åˆ æ”¹
- æ–¹æ³•è®ºå¼•å¯¼ä¸ä¼šå› åŸå‹å¯¼å…¥è€Œè¢«è·³è¿‡ï¼Œåªæ˜¯åŠ é€Ÿäº†åˆå§‹åŒ–

### 1.3 æ ¸å¿ƒèƒ½åŠ› / Core Capabilities

```
ç”¨æˆ·è¾“å…¥è¡Œä¸šåç§° â†’ æœç´¢ç½‘ç»œå‚è€ƒ â†’ AI ç”ŸæˆåŸå‹ â†’ éªŒè¯ç»“æ„ â†’ å¯¼å…¥æœ¬åœ°å­˜å‚¨
        â†“                â†“              â†“            â†“
   "å…»çŒªè¡Œä¸š"      (LLMè”ç½‘æœç´¢)   å®Œæ•´ Archetype   ç»“æ„æ ¡éªŒ
                                  JSON ç»“æ„
```

| èƒ½åŠ› | è¯´æ˜ |
|------|------|
| **AI åŸå‹ç”Ÿæˆ** | åŸºäºç”¨æˆ·è¾“å…¥çš„è¡Œä¸šåç§°å’Œæè¿°ï¼Œä½¿ç”¨ AI ç”Ÿæˆå®Œæ•´çš„ Archetype ç»“æ„ |
| **æ¥æºè¿½è¸ª** | æ˜ç¡®æ ‡è®°åŸå‹æ¥æºï¼š`static`ï¼ˆå†…ç½®ï¼‰/ `ai-generated`ï¼ˆAIç”Ÿæˆï¼‰/ `reference`ï¼ˆå‚è€ƒèµ„æ–™ï¼‰ |
| **æœ¬åœ°æŒä¹…åŒ–** | å¯¼å…¥çš„åŸå‹å­˜å‚¨åœ¨ IndexedDBï¼Œåˆ·æ–°é¡µé¢åä»ç„¶ä¿ç•™ |
| **ç»Ÿä¸€ç®¡ç†** | é™æ€åŸå‹ä¸å¯¼å…¥åŸå‹åœ¨åŒä¸€ç•Œé¢å±•ç¤ºï¼Œæ”¯æŒç­›é€‰ã€åˆ é™¤ |

---

## 2. ä¸šåŠ¡é€»è¾‘è®¾è®¡ / Business Logic Design

### 2.1 ç”¨æˆ·æ—…ç¨‹ (User Journey)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      åŸå‹åº“æµè§ˆé¡µé¢                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ å†…ç½®åŸå‹ A  â”‚  â”‚ å†…ç½®åŸå‹ B  â”‚  â”‚  [+ æ¢ç´¢æ–°è¡Œä¸š] æŒ‰é’®    â”‚  â”‚
â”‚  â”‚ ğŸŸ¢ Built-in â”‚  â”‚ ğŸŸ¢ Built-in â”‚  â”‚                         â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼ ç‚¹å‡»"æ¢ç´¢æ–°è¡Œä¸š"
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    è¡Œä¸šå‘ç°å¯¹è¯æ¡†                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ è¡Œä¸šåç§°*: [å…»çŒªè¡Œä¸š_______________]                     â”‚   â”‚
â”‚  â”‚ æè¿°è¯´æ˜:  [åŒ…æ‹¬è‚²ç§ã€é¥²å…»ã€å± å®°...]                      â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                 â”‚
â”‚  è¿›åº¦:                                                          â”‚
â”‚  [âœ“] 1. æœç´¢ç½‘ç»œå‚è€ƒèµ„æ–™     â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 100%                 â”‚
â”‚  [âœ“] 2. è·å–å†…å®¹             â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 100%                 â”‚
â”‚  [â—‹] 3. AI ç”ŸæˆåŸå‹          â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘  70%                 â”‚
â”‚  [ ] 4. éªŒè¯ç»“æ„                                                â”‚
â”‚                                                                 â”‚
â”‚  [å–æ¶ˆ]                                    [ç”ŸæˆåŸå‹]           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼ ç”Ÿæˆå®Œæˆ
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    é¢„è§ˆ & ç¡®è®¤å¯¼å…¥                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ ğŸ“¦ æ™ºèƒ½å…»çŒªç®¡ç†ç³»ç»Ÿ                                       â”‚   â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚   â”‚
â”‚  â”‚ â”‚ æ¥æº: ğŸ¤– AI ç”Ÿæˆ | æ¨¡å‹: claude-3.5-sonnet          â”‚ â”‚   â”‚
â”‚  â”‚ â”‚ ç½®ä¿¡åº¦: 85% | ç”Ÿæˆæ—¶é—´: 2026-02-03                  â”‚ â”‚   â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚   â”‚
â”‚  â”‚ å¯¹è±¡: 6 | åŠ¨ä½œ: 24 | å·¥ä½œæµ: 3 | è¿æ¥å™¨: 2              â”‚   â”‚
â”‚  â”‚ æ ¸å¿ƒå¯¹è±¡: çŒªèˆã€çŒªåªã€é¥²æ–™æ‰¹æ¬¡ã€å¥åº·è®°å½•...              â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                 â”‚
â”‚  [å–æ¶ˆ]  [é‡æ–°ç”Ÿæˆ]                            [å¯¼å…¥åŸå‹]       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼ å¯¼å…¥æˆåŠŸ
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      åŸå‹åº“æµè§ˆé¡µé¢                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ å†…ç½®åŸå‹ A  â”‚  â”‚ å†…ç½®åŸå‹ B  â”‚  â”‚ æ™ºèƒ½å…»çŒªç®¡ç†ç³»ç»Ÿ        â”‚  â”‚
â”‚  â”‚ ğŸŸ¢ Built-in â”‚  â”‚ ğŸŸ¢ Built-in â”‚  â”‚ ğŸŸ£ AI Generated         â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                 â”‚
â”‚  ç­›é€‰: [æ‰€æœ‰æ¥æº â–¼] [æ‰€æœ‰è¡Œä¸š â–¼]                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.2 åŸå‹æ¥æºç±»å‹ (Origin Types)

| ç±»å‹ | æ ‡è¯† | é¢œè‰² | è¯´æ˜ | å¯åˆ é™¤ |
|------|------|------|------|--------|
| `static` | ğŸŸ¢ ğŸ“¦ | ç»¿è‰² | å†…ç½®é™æ€åŸå‹ï¼Œéšä»£ç å‘å¸ƒ | âŒ |
| `ai-generated` | ğŸŸ£ ğŸ¤– | ç´«è‰² | AI æ ¹æ®ç”¨æˆ·è¾“å…¥ç”Ÿæˆ | âœ… |
| `reference` | ğŸ”µ ğŸ”— | è“è‰² | ä»ç½‘ç»œå‚è€ƒèµ„æ–™è§£æï¼ˆæœªæ¥æ‰©å±•ï¼‰ | âœ… |

### 2.3 ç”Ÿæˆæµç¨‹çŠ¶æ€æœº

```
          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â”‚                                                      â”‚
          â–¼                                                      â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ searching â”‚ â”€â”€â–¶ â”‚ fetching â”‚ â”€â”€â–¶ â”‚generatingâ”‚ â”€â”€â–¶ â”‚validatingâ”‚
    â”‚  æœç´¢ä¸­   â”‚     â”‚  è·å–ä¸­   â”‚     â”‚  ç”Ÿæˆä¸­   â”‚     â”‚  éªŒè¯ä¸­   â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚                â”‚                â”‚                â”‚
          â”‚                â”‚                â”‚                â”‚
          â–¼                â–¼                â–¼                â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚   error  â”‚     â”‚   error  â”‚     â”‚   error  â”‚     â”‚ completedâ”‚
    â”‚  æœç´¢å¤±è´¥ â”‚     â”‚  è·å–å¤±è´¥ â”‚     â”‚  ç”Ÿæˆå¤±è´¥ â”‚     â”‚   å®Œæˆ   â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚                â”‚                â”‚
          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                           â–¼
                    ç”¨æˆ·å¯é€‰æ‹©é‡è¯•
```

### 2.4 LLM æœç´¢èƒ½åŠ›æ”¯æŒ

ç³»ç»Ÿä¼šè‡ªåŠ¨æ£€æµ‹å½“å‰ LLM æ˜¯å¦æ”¯æŒè”ç½‘æœç´¢ï¼Œå¦‚æœæ”¯æŒåˆ™å…ˆæœç´¢è¡Œä¸šå‚è€ƒèµ„æ–™ï¼Œå†åŸºäºæœç´¢ç»“æœç”ŸæˆåŸå‹ã€‚

| LLM Provider | æ¨¡å‹ç¤ºä¾‹ | æœç´¢èƒ½åŠ› | å®ç°æ–¹å¼ |
|-------------|---------|---------|---------|
| **Moonshot (Kimi)** | kimi-latest, moonshot-v1-* | âœ… æ”¯æŒ | `web_search` å·¥å…·è°ƒç”¨ |
| **OpenRouter + Perplexity** | perplexity/sonar-* | âœ… æ”¯æŒ | åŸç”Ÿæœç´¢å¢å¼º |
| **OpenRouter + Claude/GPT** | anthropic/claude-*, openai/gpt-* | âŒ ä¸æ”¯æŒ | ç›´æ¥ç”Ÿæˆ |
| **Google Gemini** | gemini-* | âŒ æš‚ä¸æ”¯æŒ | ç›´æ¥ç”Ÿæˆï¼ˆæœªæ¥å¯åŠ  Groundingï¼‰ |
| **æ™ºè°± GLM** | glm-4-* | âŒ ä¸æ”¯æŒ | ç›´æ¥ç”Ÿæˆ |

#### æœç´¢æµç¨‹

```
ç”¨æˆ·è¾“å…¥è¡Œä¸šåç§°
        â”‚
        â–¼
  æ£€æŸ¥ LLM æ˜¯å¦æ”¯æŒæœç´¢
        â”‚
    â”Œâ”€â”€â”€â”´â”€â”€â”€â”
    â”‚       â”‚
   æ”¯æŒ    ä¸æ”¯æŒ
    â”‚       â”‚
    â–¼       â”‚
 è°ƒç”¨ LLM   â”‚
 è”ç½‘æœç´¢   â”‚
    â”‚       â”‚
    â–¼       â”‚
 è·å–è¡Œä¸š   â”‚
 å‚è€ƒèµ„æ–™   â”‚
    â”‚       â”‚
    â””â”€â”€â”€â”¬â”€â”€â”€â”˜
        â”‚
        â–¼
  ç”Ÿæˆ Archetype
  (æœ‰æœç´¢ç»“æœæ—¶ä¼šåŒ…å«å‚è€ƒèµ„æ–™)
```

### 2.5 AI ç”Ÿæˆç­–ç•¥

#### 2.5.1 Prompt è®¾è®¡åŸåˆ™

1. **Decision-First åŸåˆ™**ï¼šæ¯ä¸ªå¯¹è±¡å’ŒåŠ¨ä½œéƒ½å¿…é¡»æ”¯æŒå…·ä½“çš„ä¸šåŠ¡å†³ç­–
2. **ä¸‰å±‚å®šä¹‰è¦æ±‚**ï¼šæ¯ä¸ª Action å¿…é¡»åŒ…å« businessLayer / logicLayer / implementationLayer
3. **åŒè¯­æ”¯æŒ**ï¼šæ‰€æœ‰ç”¨æˆ·å¯è§å­—æ®µæä¾›ä¸­è‹±æ–‡
4. **ç»“æ„å®Œæ•´æ€§**ï¼šç”Ÿæˆå®Œæ•´çš„ Ontologyï¼ˆå¯¹è±¡ã€å…³ç³»ï¼‰+ Kineticï¼ˆè¿æ¥å™¨ï¼‰+ Dynamicï¼ˆå·¥ä½œæµï¼‰

#### 2.5.2 ç”Ÿæˆå†…å®¹è§„æ ¼

| ç»„ä»¶ | æ•°é‡è¦æ±‚ | è¯´æ˜ |
|------|----------|------|
| Objects | 5-8 ä¸ª | æ ¸å¿ƒä¸šåŠ¡å¯¹è±¡ |
| Actions per Object | 3-5 ä¸ª | æ¯ä¸ªå¯¹è±¡çš„ä¸šåŠ¡åŠ¨ä½œ |
| Connectors | 2-4 ä¸ª | æ•°æ®è¿æ¥å™¨ |
| Workflows | 2-3 ä¸ª | ç«¯åˆ°ç«¯ä¸šåŠ¡æµç¨‹ |
| AI Capabilities | 2-4 ä¸ª | AI å¢å¼ºèƒ½åŠ› |

#### 2.5.3 ç»“æ„éªŒè¯è§„åˆ™

```typescript
// å¿…é¡»å­—æ®µæ£€æŸ¥
- metadata.id âœ“
- metadata.name âœ“
- metadata.industry âœ“
- ontology.objects (éç©ºæ•°ç»„) âœ“
- æ¯ä¸ª object å¿…é¡»æœ‰ id, name, properties

// å¯é€‰å­—æ®µè‡ªåŠ¨å¡«å……
- connectors: [] (å¦‚æœç¼ºå¤±)
- workflows: [] (å¦‚æœç¼ºå¤±)
- rules: [] (å¦‚æœç¼ºå¤±)
- aiCapabilities: [] (å¦‚æœç¼ºå¤±)
- dashboards: [] (å¦‚æœç¼ºå¤±)
- views: [] (å¦‚æœç¼ºå¤±)
```

#### 2.5.4 å¯¼å…¥å†²çªç­–ç•¥ (v1.1.0 æ–°å¢)

ä¸ºé¿å…å¤šæ¬¡ç”ŸæˆåŒä¸€è¡Œä¸šæ—¶é™é»˜è¦†ç›–ï¼Œç³»ç»Ÿé‡‡ç”¨**å”¯ä¸€ ID ç­–ç•¥**ï¼š

```
åŸå‹ ID æ ¼å¼: {åŸå§‹IDæˆ–è¡Œä¸šslug}-{æ—¶é—´æˆ³}

ç¤ºä¾‹:
- smart-pig-farming-1706976543210
- å…»çŒªè¡Œä¸š-1706976598432
```

**ç­–ç•¥è¯´æ˜**:
| åœºæ™¯ | å¤„ç†æ–¹å¼ | ç»“æœ |
|------|----------|------|
| AI ç”Ÿæˆçš„åŸå‹æœ‰ ID | è¿½åŠ æ—¶é—´æˆ³ | `original-id-{timestamp}` |
| AI ç”Ÿæˆçš„åŸå‹æ—  ID | æ ¹æ®è¡Œä¸šåç”Ÿæˆ | `{industry-slug}-{timestamp}` |
| é‡å¤ç”ŸæˆåŒä¸€è¡Œä¸š | æ¯æ¬¡ç”Ÿæˆæ–° ID | ä¿ç•™æ‰€æœ‰å†å²ç‰ˆæœ¬ |

**ä¼˜åŠ¿**:
- é¿å…é™é»˜è¦†ç›–ï¼Œä¿ç•™å†å²æ•°æ®
- ä¸ºæœªæ¥ç‰ˆæœ¬ç®¡ç†åŠŸèƒ½é“ºè·¯
- ç”¨æˆ·å¯åœ¨åˆ—è¡¨ä¸­çœ‹åˆ°å¤šä¸ªç‰ˆæœ¬å¹¶é€‰æ‹©åˆ é™¤æ—§ç‰ˆæœ¬

---

## 3. æ•°æ®æ¨¡å‹è®¾è®¡ / Data Model Design

### 3.1 ArchetypeOrigin æ¥å£

```typescript
// types/archetype.ts

export type ArchetypeOriginType = 'static' | 'reference' | 'ai-generated';

export interface ArchetypeOrigin {
  type: ArchetypeOriginType;

  // === reference ç±»å‹ä¸“ç”¨ ===
  sourceUrl?: string;        // å‚è€ƒèµ„æ–™ URL
  sourceName?: string;       // å‚è€ƒèµ„æ–™åç§°
  fetchDate?: string;        // è·å–æ—¥æœŸ (ISO 8601)

  // === ai-generated ç±»å‹ä¸“ç”¨ ===
  generationDate?: string;   // ç”Ÿæˆæ—¥æœŸ (ISO 8601)
  modelUsed?: string;        // ä½¿ç”¨çš„ AI æ¨¡å‹
  confidence?: number;       // AI ç½®ä¿¡åº¦ (0-1)
  promptVersion?: string;    // Prompt ç‰ˆæœ¬

  // === é€šç”¨ ===
  userInput?: {
    industryName: string;
    description?: string;
  };
}
```

### 3.2 IndexedDB å­˜å‚¨ç»“æ„

```typescript
// services/archetypeStorageService.ts

interface StoredArchetype {
  id: string;                    // ä¸»é”®ï¼Œç­‰äº archetype.metadata.id
  archetype: Archetype;          // å®Œæ•´çš„ Archetype ç»“æ„
  origin: ArchetypeOrigin;       // æ¥æºä¿¡æ¯
  createdAt: string;             // åˆ›å»ºæ—¶é—´
  updatedAt: string;             // æ›´æ–°æ—¶é—´
}

// IndexedDB é…ç½®
const DB_NAME = 'ontology-assistant-archetypes';
const DB_VERSION = 1;
const STORE_NAME = 'archetypes';

// ç´¢å¼•
- industry: archetype.metadata.industry
- originType: origin.type
- createdAt: createdAt
```

### 3.3 ArchetypeIndex æ‰©å±•

```typescript
// types/archetype.ts

export interface ArchetypeIndex {
  // ... åŸæœ‰å­—æ®µ ...

  // æ–°å¢: æ¥æºä¿¡æ¯
  origin?: ArchetypeOrigin;
}
```

---

## 4. æŠ€æœ¯æ¶æ„ / Technical Architecture

### 4.1 æ–‡ä»¶ç»“æ„

```
ontology-assistant/
â”œâ”€â”€ types/
â”‚   â””â”€â”€ archetype.ts              # [ä¿®æ”¹] æ–°å¢ ArchetypeOrigin ç±»å‹
â”‚
â”œâ”€â”€ services/
â”‚   â”œâ”€â”€ aiService.ts              # [ä¿®æ”¹] å¤šæ¨¡æ€æ–‡ä»¶ Provider å…¼å®¹å¤„ç†
â”‚   â”œâ”€â”€ archetypeStorageService.ts # [æ–°å»º] IndexedDB å­˜å‚¨æœåŠ¡
â”‚   â””â”€â”€ archetypeGeneratorService.ts # [æ–°å»º+ä¿®å¤] AI åŸå‹ç”ŸæˆæœåŠ¡ + LLM å…¼å®¹æ€§ä¿®å¤
â”‚
â”œâ”€â”€ content/archetypes/
â”‚   â”œâ”€â”€ index.ts                  # [ä¿®æ”¹] æ–°å¢åˆå¹¶å‡½æ•°
â”‚   â”œâ”€â”€ healthcare-fhir.ts        # [ä¿®å¤] Link å­—æ®µè¿ç§» sourceIdâ†’source
â”‚   â””â”€â”€ retail-omnichannel.ts     # [ä¿®å¤] Link å­—æ®µè¿ç§» sourceIdâ†’source
â”‚
â”œâ”€â”€ lib/
â”‚   â”œâ”€â”€ readinessChecker.ts       # [ä¿®å¤] Action ä¸‰å±‚è¯„ä¼°å…¼å®¹
â”‚   â””â”€â”€ methodologyEngine.ts      # [ä¿®å¤] Action ä¸‰å±‚è¯„ä¼°å…¼å®¹
â”‚
â”œâ”€â”€ utils/
â”‚   â””â”€â”€ qualityChecker.ts         # [å·²æ˜¯æ–°ç»“æ„] Action ä¸‰å±‚è¯„ä¼°
â”‚
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ ArchetypeBrowser.tsx      # [ä¿®æ”¹] é›†æˆæ¢ç´¢å…¥å£å’Œæ¥æºç­›é€‰
â”‚   â”œâ”€â”€ ArchetypeViewer.tsx       # [ä¿®æ”¹] æ”¯æŒå¼‚æ­¥åŠ è½½å¯¼å…¥åŸå‹
â”‚   â”œâ”€â”€ IndustryDiscovery.tsx     # [æ–°å»º] è¡Œä¸šå‘ç°å¯¹è¯æ¡†
â”‚   â”œâ”€â”€ SourceBadge.tsx           # [æ–°å»º] æ¥æºå¾½ç« ç»„ä»¶
â”‚   â”œâ”€â”€ FileUpload.tsx            # [ä¿®å¤] æ–°å¢ getProviderCompatibility + aiProvider props
â”‚   â”œâ”€â”€ ChatInterface.tsx         # [ä¿®å¤] å¤šæ¨¡æ€ UI è­¦å‘Š + Link å­—æ®µç»Ÿä¸€
â”‚   â”œâ”€â”€ StructuringWorkbench.tsx  # [ä¿®å¤] Link å­—æ®µç»Ÿä¸€
â”‚   â””â”€â”€ LinkRecommender.tsx       # [ä¿®å¤] Link å­—æ®µç»Ÿä¸€
â”‚
â””â”€â”€ App.tsx                       # [ä¿®æ”¹] ä¼ é€’ aiSettings åˆ° ArchetypeBrowser
```

### 4.2 ç»„ä»¶ä¾èµ–å…³ç³»

```
App.tsx
    â”‚
    â””â”€â”€ ArchetypeBrowser.tsx â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚                                      â”‚
            â”œâ”€â”€ SourceBadge.tsx (SourceIndicator)  â”‚
            â”‚                                      â”‚
            â””â”€â”€ IndustryDiscovery.tsx              â”‚
                    â”‚                              â”‚
                    â”œâ”€â”€ SourceBadge.tsx            â”‚
                    â”‚                              â”‚
                    â””â”€â”€ archetypeGeneratorService  â”‚
                            â”‚                      â”‚
                            â””â”€â”€ aiService.ts       â”‚
                                                   â”‚
                    archetypeStorageService â—€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â””â”€â”€ IndexedDB
```

### 4.3 æ•°æ®æµ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          æ•°æ®è¯»å–æµç¨‹                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                     â”‚
â”‚  ArchetypeBrowser                                                   â”‚
â”‚        â”‚                                                            â”‚
â”‚        â–¼                                                            â”‚
â”‚  getMergedArchetypeIndexList()                                      â”‚
â”‚        â”‚                                                            â”‚
â”‚        â”œâ”€â”€â–¶ getArchetypeIndexList()  â”€â”€â–¶ é™æ€åŸå‹ (allArchetypes)   â”‚
â”‚        â”‚                                                            â”‚
â”‚        â””â”€â”€â–¶ archetypeStorageService.getArchetypeIndexList()         â”‚
â”‚                      â”‚                                              â”‚
â”‚                      â–¼                                              â”‚
â”‚               IndexedDB (archetypes store)                          â”‚
â”‚                                                                     â”‚
â”‚        â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                   â”‚
â”‚                      â”‚                                              â”‚
â”‚                      â–¼                                              â”‚
â”‚              åˆå¹¶åçš„ ArchetypeIndex[]                               â”‚
â”‚                                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          æ•°æ®å†™å…¥æµç¨‹                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                     â”‚
â”‚  IndustryDiscovery                                                  â”‚
â”‚        â”‚                                                            â”‚
â”‚        â–¼                                                            â”‚
â”‚  archetypeGeneratorService.generateArchetype()                      â”‚
â”‚        â”‚                                                            â”‚
â”‚        â”œâ”€â”€â–¶ searchWebForReferences() (å½“å‰è¿”å›ç©ºï¼Œæœªæ¥æ‰©å±•)          â”‚
â”‚        â”‚                                                            â”‚
â”‚        â”œâ”€â”€â–¶ AI API è°ƒç”¨ (OpenRouter / Gemini / etc.)                â”‚
â”‚        â”‚                                                            â”‚
â”‚        â””â”€â”€â–¶ validateArchetypeStructure()                            â”‚
â”‚                      â”‚                                              â”‚
â”‚                      â–¼                                              â”‚
â”‚              { archetype, origin }                                  â”‚
â”‚                      â”‚                                              â”‚
â”‚                      â–¼                                              â”‚
â”‚  archetypeStorageService.saveArchetype()                            â”‚
â”‚                      â”‚                                              â”‚
â”‚                      â–¼                                              â”‚
â”‚               IndexedDB (archetypes store)                          â”‚
â”‚                                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 5. API æ¥å£è®¾è®¡ / API Interface Design

### 5.1 archetypeStorageService

```typescript
class ArchetypeStorageService {
  // åˆå§‹åŒ–æ•°æ®åº“è¿æ¥
  async initialize(): Promise<void>;

  // ä¿å­˜åŸå‹ï¼ˆæ–°å¢æˆ–æ›´æ–°ï¼‰
  async saveArchetype(archetype: Archetype, origin: ArchetypeOrigin): Promise<string>;

  // è·å–å•ä¸ªåŸå‹
  async getArchetype(id: string): Promise<StoredArchetype | null>;

  // è·å–æ‰€æœ‰åŸå‹
  async getAllArchetypes(): Promise<StoredArchetype[]>;

  // æŒ‰è¡Œä¸šè·å–
  async getArchetypesByIndustry(industry: string): Promise<StoredArchetype[]>;

  // æŒ‰æ¥æºç±»å‹è·å–
  async getArchetypesByOriginType(type: ArchetypeOriginType): Promise<StoredArchetype[]>;

  // åˆ é™¤åŸå‹
  async deleteArchetype(id: string): Promise<void>;

  // æ£€æŸ¥æ˜¯å¦å­˜åœ¨
  async hasArchetype(id: string): Promise<boolean>;

  // è·å–ç´¢å¼•åˆ—è¡¨ï¼ˆç”¨äºå±•ç¤ºï¼‰
  async getArchetypeIndexList(): Promise<ArchetypeIndex[]>;

  // æ¸…ç©ºæ‰€æœ‰
  async clearAll(): Promise<void>;
}
```

### 5.2 archetypeGeneratorService

```typescript
class ArchetypeGeneratorService {
  constructor(settings: AISettings);

  // æ›´æ–° AI è®¾ç½®
  updateSettings(settings: AISettings): void;

  // ç”ŸæˆåŸå‹ï¼ˆä¸»æ–¹æ³•ï¼‰
  async generateArchetype(
    industryName: string,
    description: string,
    onProgress?: (progress: GenerationProgress) => void
  ): Promise<GenerationResult>;

  // éªŒè¯åŸå‹ç»“æ„
  validateArchetype(archetype: Archetype): {
    valid: boolean;
    errors: string[];
    warnings: string[];
  };
}

// è¿›åº¦å›è°ƒå‚æ•°
interface GenerationProgress {
  step: 'searching' | 'fetching' | 'generating' | 'validating' | 'completed' | 'error';
  progress: number;  // 0-100
  message: string;
  details?: string;
}

// ç”Ÿæˆç»“æœ
interface GenerationResult {
  success: boolean;
  archetype?: Archetype;
  origin?: ArchetypeOrigin;
  error?: string;
  warnings?: string[];
}
```

### 5.3 content/archetypes/index.ts æ–°å¢å‡½æ•°

```typescript
// è·å–åˆå¹¶åçš„åŸå‹ç´¢å¼•åˆ—è¡¨ï¼ˆé™æ€ + å¯¼å…¥ï¼‰
async function getMergedArchetypeIndexList(): Promise<ArchetypeIndex[]>;

// è·å–åˆå¹¶åçš„å•ä¸ªåŸå‹
async function getMergedArchetypeById(id: string): Promise<Archetype | undefined>;

// æŒ‰æ¥æºç±»å‹ç­›é€‰
async function getMergedArchetypesByOriginType(
  originType: 'static' | 'reference' | 'ai-generated' | 'all'
): Promise<ArchetypeIndex[]>;

// åˆ é™¤å¯¼å…¥çš„åŸå‹
async function deleteImportedArchetype(id: string): Promise<boolean>;

// è·å–æ‰€æœ‰å¯¼å…¥çš„åŸå‹
async function getImportedArchetypes(): Promise<StoredArchetype[]>;
```

---

## 6. å®‰å…¨ä¸éšç§è€ƒè™‘ / Security & Privacy

### 6.1 æ•°æ®å­˜å‚¨

| æ•°æ®ç±»å‹ | å­˜å‚¨ä½ç½® | æ•æ„Ÿçº§åˆ« | è¯´æ˜ |
|----------|----------|----------|------|
| å¯¼å…¥çš„åŸå‹ | IndexedDB (æœ¬åœ°) | ä½ | ä»…å­˜å‚¨åœ¨ç”¨æˆ·æµè§ˆå™¨ï¼Œä¸ä¸Šä¼ æœåŠ¡å™¨ |
| ç”¨æˆ·è¾“å…¥ (è¡Œä¸šåç§°ã€æè¿°) | IndexedDB (ä½œä¸º origin.userInput) | ä½ | ç”¨äºè¿½æº¯ç”Ÿæˆæ¥æº |
| AI API Key | SessionStorage | é«˜ | ä¸å­˜å‚¨åœ¨ IndexedDB |

### 6.2 AI è°ƒç”¨

- AI ç”Ÿæˆè¯·æ±‚ç›´æ¥å‘é€åˆ°ç”¨æˆ·é…ç½®çš„ AI Providerï¼ˆOpenRouterã€Gemini ç­‰ï¼‰
- æœ¬ç³»ç»Ÿä¸ä½œä¸ºä¸­é—´ä»£ç†ï¼Œä¸è®°å½•ç”¨æˆ·ä¸ AI çš„äº¤äº’å†…å®¹
- ç”¨æˆ·éœ€è‡ªè¡Œé…ç½®å¹¶ä¿æŠ¤å…¶ API Key

---

## 7. æœªæ¥æ‰©å±• / Future Enhancements

### 7.1 çŸ­æœŸ (v1.1)

- [ ] **ç½‘ç»œå‚è€ƒæœç´¢**ï¼šæ¥å…¥æœç´¢ APIï¼ˆBing Search / SerpAPIï¼‰ï¼Œè‡ªåŠ¨æŸ¥æ‰¾è¡Œä¸šå‚è€ƒèµ„æ–™
- [ ] **å‚è€ƒèµ„æ–™è§£æ**ï¼šä»æœç´¢ç»“æœä¸­æå– Ontology å…ƒç´ ï¼Œç”Ÿæˆ `reference` ç±»å‹åŸå‹
- [ ] **åŸå‹å¯¼å‡º**ï¼šæ”¯æŒå°†åŸå‹å¯¼å‡ºä¸º JSON æ–‡ä»¶

### 7.2 ä¸­æœŸ (v1.2)

- [ ] **åŸå‹ç¼–è¾‘**ï¼šæ”¯æŒå¯¹å¯¼å…¥çš„åŸå‹è¿›è¡Œåœ¨çº¿ç¼–è¾‘
- [ ] **åŸå‹åˆ†äº«**ï¼šç”Ÿæˆå¯åˆ†äº«çš„é“¾æ¥æˆ–äºŒç»´ç 
- [ ] **ç‰ˆæœ¬ç®¡ç†**ï¼šæ”¯æŒåŸå‹çš„ç‰ˆæœ¬å†å²å’Œå›æ»š

### 7.3 é•¿æœŸ (v2.0)

- [ ] **åŸå‹å¸‚åœº**ï¼šç¤¾åŒºè´¡çŒ®å’Œåˆ†äº«åŸå‹
- [ ] **åä½œç¼–è¾‘**ï¼šå¤šäººåä½œç¼–è¾‘åŒä¸€åŸå‹
- [ ] **è‡ªåŠ¨ä¼˜åŒ–**ï¼šåŸºäºä½¿ç”¨åé¦ˆè‡ªåŠ¨ä¼˜åŒ–åŸå‹è´¨é‡

---

## 8. æµ‹è¯•æ£€æŸ¥æ¸…å• / Testing Checklist

### 8.1 åŠŸèƒ½æµ‹è¯•

- [ ] è¾“å…¥è¡Œä¸šåç§°ï¼ˆå¦‚"å…»çŒªè¡Œä¸š"ï¼‰ï¼Œèƒ½æˆåŠŸç”ŸæˆåŸå‹
- [ ] ç”Ÿæˆçš„åŸå‹åŒ…å«å®Œæ•´çš„ Objectsã€Actionsã€Workflows
- [ ] åŸå‹å¯æ­£å¸¸å¯¼å…¥å¹¶æ˜¾ç¤ºåœ¨åˆ—è¡¨ä¸­
- [ ] æ¥æºæ ‡è®°ï¼ˆAI Generatedï¼‰æ­£ç¡®æ˜¾ç¤º
- [ ] ç‚¹å‡»åŸå‹å¡ç‰‡å¯æŸ¥çœ‹è¯¦æƒ…

### 8.2 æŒä¹…åŒ–æµ‹è¯•

- [ ] åˆ·æ–°é¡µé¢åï¼Œå¯¼å…¥çš„åŸå‹ä»ç„¶å­˜åœ¨
- [ ] å¯åˆ é™¤å·²å¯¼å…¥çš„åŸå‹
- [ ] åˆ é™¤ååˆ·æ–°é¡µé¢ï¼ŒåŸå‹ä¸å†æ˜¾ç¤º

### 8.3 ç­›é€‰æµ‹è¯•

- [ ] æ¥æºç­›é€‰ï¼ˆAll / Built-in / AI Generated / Referenceï¼‰æ­£å¸¸å·¥ä½œ
- [ ] è¡Œä¸šç­›é€‰åŒ…å«å¯¼å…¥åŸå‹çš„è¡Œä¸š

### 8.4 è¾¹ç•Œæµ‹è¯•

- [ ] æœªé…ç½® AI API Key æ—¶ï¼Œ"æ¢ç´¢æ–°è¡Œä¸š"æŒ‰é’®ä¸æ˜¾ç¤º
- [ ] AI ç”Ÿæˆå¤±è´¥æ—¶ï¼Œæ˜¾ç¤ºé”™è¯¯ä¿¡æ¯å¹¶å…è®¸é‡è¯•
- [ ] é‡å¤è¡Œä¸šåç§°ç”Ÿæˆæ—¶ï¼Œæ­£ç¡®å¤„ç†ï¼ˆè¦†ç›–æˆ–æç¤ºï¼‰

### 8.5 å…¼å®¹æ€§æµ‹è¯•

- [ ] Chrome / Firefox / Safari å‡èƒ½æ­£å¸¸ä½¿ç”¨ IndexedDB
- [ ] ç°æœ‰é™æ€åŸå‹åŠŸèƒ½ä¸å—å½±å“

---

## 9. å˜æ›´è®°å½• / Changelog

| ç‰ˆæœ¬ | æ—¥æœŸ | å˜æ›´å†…å®¹ |
|------|------|----------|
| 1.1.2 | 2026-02-03 | Code Review ä¸‰è½®ä¿®å¤ï¼šå¯¼å…¥åŸå‹åº”ç”¨è·¯å¾„ï¼ˆgetMergedArchetypeByIdï¼‰ |
| 1.1.1 | 2026-02-03 | Code Review äºŒè½®ä¿®å¤ï¼šPDF æ‹¦æˆªé€»è¾‘ã€å¯¼å…¥åè‡ªåŠ¨å¯¼èˆª |
| 1.1.0 | 2026-02-03 | Code Review ä¿®å¤ï¼šLLM å…¼å®¹æ€§ã€å¤šæ¨¡æ€ UI æç¤ºã€Link æ¨¡å‹ç»Ÿä¸€ã€Action è¯„ä¼°ç»Ÿä¸€ |
| 1.0.0 | 2026-02-03 | åˆå§‹ç‰ˆæœ¬ï¼šAI åŸå‹ç”Ÿæˆã€IndexedDB å­˜å‚¨ã€æ¥æºè¿½è¸ª |

---

## 10. v1.1.0 Code Review ä¿®å¤è¯¦æƒ… / Code Review Fixes (v1.1.0)

æœ¬èŠ‚è®°å½• Code Review ä¸­å‘ç°çš„é—®é¢˜åŠä¿®å¤æ–¹æ¡ˆã€‚

### 10.1 [P1] LLM Provider å…¼å®¹æ€§ä¿®å¤

**é—®é¢˜**: ä½¿ç”¨ Kimi (Moonshot) æ¨¡å‹æ—¶ï¼ŒåŸå‹ç”Ÿæˆä¸€ç›´å¡åœ¨"ç”Ÿæˆä¸­"çŠ¶æ€ä¸è¿”å›ç»“æœã€‚

**åŸå› **: Moonshot API ä¸æ”¯æŒ `response_format: { type: 'json_object' }` å‚æ•°ï¼Œå¯¼è‡´è¯·æ±‚å¤±è´¥ã€‚

**ä¿®å¤æ–¹æ¡ˆ**:
- åœ¨ `archetypeGeneratorService.ts` ä¸­æ·»åŠ  Provider ç‰¹å®šå¤„ç†
- ä»…å¯¹ OpenAI/OpenRouter å¯ç”¨ `response_format`
- æ·»åŠ  `extractJSON()` æ–¹æ³•ç”¨äºä»é JSON æ¨¡å¼å“åº”ä¸­æå– JSON
- æ·»åŠ  120 ç§’è¶…æ—¶æ§åˆ¶

**æ¶‰åŠæ–‡ä»¶**: `services/archetypeGeneratorService.ts`

```typescript
// Provider ç‰¹å®š JSON æ¨¡å¼æ”¯æŒ
const supportsJsonMode = settings.provider === 'openai' || settings.provider === 'openrouter';
if (supportsJsonMode) {
  requestBody.response_format = { type: 'json_object' };
}

// JSON æå– fallback
private extractJSON(text: string): any {
  // å°è¯•å¤šç§æ–¹å¼æå– JSON
  const jsonMatch = text.match(/```(?:json)?\s*([\s\S]*?)```/);
  if (jsonMatch) return JSON.parse(jsonMatch[1].trim());
  // ... æ›´å¤š fallback é€»è¾‘
}
```

---

### 10.2 [P1] Link æ¨¡å‹å­—æ®µç»Ÿä¸€

**é—®é¢˜**: ç³»ç»Ÿä¸­ `OntologyLink` ç±»å‹å®šä¹‰ä½¿ç”¨ `source/target`ï¼Œä½†éƒ¨åˆ†ä»£ç å’Œæ•°æ®æ–‡ä»¶ä½¿ç”¨ `sourceId/targetId`ï¼Œå¯¼è‡´å…³ç³»å›¾æ˜¾ç¤ºå¼‚å¸¸ã€‚

**åŸå› **: å†å²é—ç•™é—®é¢˜ï¼Œå­—æ®µå‘½åä¸ä¸€è‡´ã€‚

**ä¿®å¤æ–¹æ¡ˆ**:
1. ç»Ÿä¸€ç±»å‹å®šä¹‰ï¼š`OntologyLink` ä½¿ç”¨ `source/target/label`
2. ä¿®å¤æ‰€æœ‰å†™å…¥ Link çš„ä»£ç ä½¿ç”¨æ–°å­—æ®µ
3. è¿ç§» Archetype æ•°æ®æ–‡ä»¶

**æ¶‰åŠæ–‡ä»¶**:
| æ–‡ä»¶ | å˜æ›´ |
|------|------|
| `components/ChatInterface.tsx` | åˆ›å»º integration link æ—¶ä½¿ç”¨ `source/target` |
| `components/StructuringWorkbench.tsx` | åˆ›å»º link æ—¶ä½¿ç”¨ `source/target` |
| `components/LinkRecommender.tsx` | AI æ¨è link è¾“å‡ºä½¿ç”¨ `source/target` |
| `content/archetypes/healthcare-fhir.ts` | æ•°æ®è¿ç§»ï¼š`sourceId/targetId/relation` â†’ `source/target/label` |
| `content/archetypes/retail-omnichannel.ts` | æ•°æ®è¿ç§»ï¼šåŒä¸Š |

**ä¿®å¤å‰**:
```typescript
links: [
  { id: 'link-1', sourceId: 'patient', targetId: 'encounter', relation: 'has' }
]
```

**ä¿®å¤å**:
```typescript
links: [
  { id: 'link-1', source: 'patient', target: 'encounter', label: 'has' }
]
```

---

### 10.3 [P2] å¤šæ¨¡æ€æ–‡ä»¶ä¸Šä¼ é¢„éªŒè¯ UI æç¤º

**é—®é¢˜**: ç”¨æˆ·ä¸Šä¼  PDF/Office æ–‡æ¡£æ—¶ï¼Œå¦‚æœå½“å‰ AI Provider ä¸æ”¯æŒè¯¥ç±»å‹ï¼Œä¼šåœ¨å‘é€åæ‰æŠ¥é”™ï¼Œä½“éªŒå·®ã€‚

**åŸå› **: ç¼ºå°‘ä¸Šä¼ å‰çš„å…¼å®¹æ€§æ£€æŸ¥å’Œæç¤ºã€‚

**ä¿®å¤æ–¹æ¡ˆ**:
- æ·»åŠ  `getProviderCompatibility()` å‡½æ•°æ£€æŸ¥æ–‡ä»¶ç±»å‹å…¼å®¹æ€§
- åœ¨æ–‡ä»¶åˆ—è¡¨ä¸­æ˜¾ç¤ºé»„è‰²è­¦å‘Šæç¤º
- ä¸ºä¸æ”¯æŒçš„æ–‡ä»¶æ·»åŠ é»„è‰²è¾¹æ¡†é«˜äº®

**æ¶‰åŠæ–‡ä»¶**:
| æ–‡ä»¶ | å˜æ›´ |
|------|------|
| `components/FileUpload.tsx` | æ–°å¢ `getProviderCompatibility()` å‡½æ•°ï¼Œæ·»åŠ  `aiProvider/aiModel` props |
| `components/ChatInterface.tsx` | è¯»å– AI è®¾ç½®ï¼Œä¼ é€’ç»™ FileUploadButtonï¼Œæ˜¾ç¤ºå…¼å®¹æ€§è­¦å‘Š |

**å…¼å®¹æ€§è§„åˆ™**:
| æ–‡ä»¶ç±»å‹ | Claude (OpenRouter) | å…¶ä»– Provider | è­¦å‘Šä¿¡æ¯ |
|----------|---------------------|---------------|----------|
| å›¾ç‰‡ (PNG/JPG) | âœ… æ”¯æŒ | âœ… æ”¯æŒ | - |
| PDF | âœ… æ”¯æŒ | âŒ ä¸æ”¯æŒ | "PDF éœ€ä½¿ç”¨ Claude æ¨¡å‹" |
| Office (Excel/PPT/Word) | âŒ ä¸æ”¯æŒ | âŒ ä¸æ”¯æŒ | "Office æ–‡æ¡£åœ¨å½“å‰ AI ä¸å—æ”¯æŒ" |
| æ–‡æœ¬æ–‡ä»¶ | âœ… æ”¯æŒ | âœ… æ”¯æŒ | - |

**UI æ•ˆæœ - ä¸Šä¼ æ—¶è­¦å‘Š**:
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ“„ report.pdf                           12.3 KB    â”‚
â”‚    æ–‡æ¡£ (AI è§†è§‰)                                   â”‚
â”‚    âš ï¸ PDF éœ€ä½¿ç”¨ Claude æ¨¡å‹                        â”‚  â† é»„è‰²è­¦å‘Š
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**å‘é€å‰æ‹¦æˆª** (v1.1.0 å¢å¼º):

å¯¹äºå®Œå…¨ä¸æ”¯æŒçš„æ–‡ä»¶ç±»å‹ï¼Œç³»ç»Ÿåœ¨å‘é€å‰**æ‹¦æˆª**å¹¶æç¤ºç”¨æˆ·ç§»é™¤æ–‡ä»¶ï¼š

```
ç”¨æˆ·ç‚¹å‡»å‘é€
      â”‚
      â–¼
æ£€æŸ¥æ˜¯å¦æœ‰ä¸æ”¯æŒçš„æ–‡ä»¶
      â”‚
  â”Œâ”€â”€â”€â”´â”€â”€â”€â”
  â”‚       â”‚
 æœ‰      æ— 
  â”‚       â”‚
  â–¼       â–¼
æ˜¾ç¤ºé”™è¯¯   æ­£å¸¸å‘é€
æç¤ºç§»é™¤
```

**æ‹¦æˆªè§„åˆ™** (v1.1.1 ä¿®å¤):

`getProviderCompatibility` è¿”å›æ˜¾å¼çš„ `blockSend` å­—æ®µï¼š

| æ–‡ä»¶ç±»å‹ | `blockSend` | è¡Œä¸º |
|----------|-------------|------|
| Office (Excel/PPT/Word) | `true` | âŒ ç¡¬æ‹¦æˆªï¼Œæç¤ºç§»é™¤ |
| PDF (é Claude) | `false` | âš ï¸ è­¦å‘Šä½†å…è®¸å‘é€ |
| å›¾ç‰‡ | - | âœ… æ­£å¸¸å‘é€ |
| æ–‡æœ¬æ–‡ä»¶ | - | âœ… æ­£å¸¸å‘é€ |

```typescript
interface ProviderCompatibilityResult {
  supported: boolean;   // æ˜¯å¦å®Œå…¨æ”¯æŒ
  warning?: string;     // è­¦å‘Šä¿¡æ¯
  blockSend: boolean;   // æ˜¯å¦ç¡¬æ‹¦æˆª
}
```

---

### 10.4 [P2] Action ä¸‰å±‚è¯„ä¼°ç»Ÿä¸€

**é—®é¢˜**: ç³»ç»Ÿä¸­æœ‰ä¸‰å¤„è¯„ä¼° Action å®Œæ•´åº¦çš„åœ°æ–¹ï¼Œä½¿ç”¨äº†ä¸ä¸€è‡´çš„å­—æ®µæ£€æŸ¥é€»è¾‘ï¼š
- `lib/readinessChecker.ts` - å‡†å¤‡åº¦æ£€æŸ¥
- `utils/qualityChecker.ts` - è´¨é‡è¯„åˆ†
- `lib/methodologyEngine.ts` - æ–¹æ³•è®ºå¼•å¯¼

**åŸå› **: æ–°å¢ä¸‰å±‚ç»“æ„ï¼ˆbusinessLayer/logicLayer/implementationLayerï¼‰åï¼Œéƒ¨åˆ†ä»£ç æœªæ›´æ–°ã€‚

**ä¿®å¤æ–¹æ¡ˆ**:
1. `readinessChecker.ts` (å·²ä¿®å¤): ä½¿ç”¨æ–°ç»“æ„ + æ—§å­—æ®µå…¼å®¹
2. `qualityChecker.ts` (å·²æ˜¯æ–°ç»“æ„): ä»…æ£€æŸ¥æ–°å­—æ®µ
3. `methodologyEngine.ts` (æœ¬æ¬¡ä¿®å¤): æ·»åŠ æ–°ç»“æ„ + æ—§å­—æ®µå…¼å®¹

**æ¶‰åŠæ–‡ä»¶**: `lib/methodologyEngine.ts`

**ä¿®å¤å‰**:
```typescript
const definedActions = allActions.filter(action =>
  action.description && action.description.length >= 10 &&
  action.businessLayer?.targetObject
);
```

**ä¿®å¤å**:
```typescript
const definedActions = allActions.filter(action => {
  // æ£€æŸ¥æè¿°ï¼ˆé¡¶å±‚æˆ– businessLayer ä¸­ï¼‰
  const hasDescription = (action.description && action.description.length >= 10) ||
    (action.businessLayer?.description && action.businessLayer.description.length >= 10);

  // æ£€æŸ¥ç›®æ ‡å¯¹è±¡ï¼ˆæ–°ç»“æ„æˆ–æ—§å­—æ®µï¼‰
  const hasTargetObject = action.businessLayer?.targetObject ||
    (action as any).targetObject;

  return hasDescription && hasTargetObject;
});
```

---

### 10.5 ä¿®å¤æ±‡æ€»è¡¨

| ä¼˜å…ˆçº§ | é—®é¢˜ | çŠ¶æ€ | æ¶‰åŠæ–‡ä»¶æ•° |
|--------|------|------|-----------|
| P1 | Kimi LLM å…¼å®¹æ€§ | âœ… å·²ä¿®å¤ | 1 |
| P1 | Link æ¨¡å‹å­—æ®µç»Ÿä¸€ | âœ… å·²ä¿®å¤ | 5 |
| P2 | å¤šæ¨¡æ€ UI é¢„éªŒè¯æç¤º | âœ… å·²ä¿®å¤ | 2 |
| P2 | Action ä¸‰å±‚è¯„ä¼°ç»Ÿä¸€ | âœ… å·²ä¿®å¤ | 1 |

---

### 10.6 v1.1.1 Code Review äºŒè½®ä¿®å¤

#### 10.6.1 [P2] PDF æ‹¦æˆªé€»è¾‘ä¿®å¤

**é—®é¢˜**: æ‹¦æˆªé€»è¾‘ä½¿ç”¨ `compat.warning?.includes('ä¸å—æ”¯æŒ')` åˆ¤æ–­ï¼Œä¼šè¯¯æ‹¦ PDFï¼Œä¸”ä¾èµ–ä¸­æ–‡å­—ç¬¦ä¸²ã€‚

**ä¿®å¤æ–¹æ¡ˆ**: æ·»åŠ æ˜¾å¼ `blockSend` å­—æ®µ

```typescript
// FileUpload.tsx
interface ProviderCompatibilityResult {
  supported: boolean;   // æ˜¯å¦å®Œå…¨æ”¯æŒ
  warning?: string;     // è­¦å‘Šä¿¡æ¯
  blockSend: boolean;   // æ˜¯å¦ç¡¬æ‹¦æˆªï¼ˆtrue=é˜»æ­¢å‘é€ï¼Œfalse=å…è®¸ï¼‰
}
```

**æ‹¦æˆªé€»è¾‘**:
- Office æ–‡æ¡£: `blockSend: true` â†’ ç¡¬æ‹¦æˆª
- PDF (é Claude): `blockSend: false` â†’ è­¦å‘Šä½†å…è®¸å‘é€

**æ¶‰åŠæ–‡ä»¶**: `FileUpload.tsx`, `ChatInterface.tsx`

---

#### 10.6.2 [P2] å¯¼å…¥åè‡ªåŠ¨å¯¼èˆª

**é—®é¢˜**: Toast æ–‡æ¡ˆ"è¿›å…¥å»ºæ¨¡é˜¶æ®µ"ï¼Œä½†å®é™…æœªè·³è½¬ï¼Œåœç•™åœ¨åŸå‹åº“é¡µé¢ã€‚

**ä¿®å¤æ–¹æ¡ˆ**: å¯¼å…¥æˆåŠŸåè‡ªåŠ¨è°ƒç”¨ `onApplyArchetype`

```typescript
// ArchetypeBrowser.tsx
const handleImported = (archetypeId: string) => {
  setShowDiscovery(false);
  loadArchetypes();
  setImportSuccessMessage(t.importSuccess);
  setTimeout(() => setImportSuccessMessage(null), 5000);

  // è‡ªåŠ¨åº”ç”¨åŸå‹ï¼Œè¿›å…¥å»ºæ¨¡é˜¶æ®µ
  setTimeout(() => {
    onApplyArchetype(archetypeId);
  }, 500);
};
```

**æ¶‰åŠæ–‡ä»¶**: `ArchetypeBrowser.tsx`

---

### 10.7 v1.1.2 Code Review ä¸‰è½®ä¿®å¤

#### 10.7.1 [P1] å¯¼å…¥åŸå‹æ— æ³•åº”ç”¨

**é—®é¢˜**: `handleApplyArchetype` ä½¿ç”¨ `getArchetypeById` åªæŸ¥é™æ€åŸå‹ï¼Œå¯¼å…¥çš„åŸå‹è¿”å› `undefined`ï¼Œå¯¼è‡´è‡ªåŠ¨åº”ç”¨é™é»˜å¤±è´¥ã€‚

**ä¿®å¤æ–¹æ¡ˆ**:

1. æ”¹ç”¨å¼‚æ­¥çš„ `getMergedArchetypeById`ï¼ˆæ”¯æŒé™æ€+å¯¼å…¥ï¼‰
2. å°† `handleApplyArchetype` æ”¹ä¸º async å‡½æ•°
3. æ·»åŠ  `skipConfirm` å‚æ•°ï¼Œå¯¼å…¥åè‡ªåŠ¨åº”ç”¨è·³è¿‡ç¡®è®¤

```typescript
// App.tsx
const handleApplyArchetype = useCallback(async (archetypeId: string, skipConfirm = false) => {
  if (!skipConfirm && !window.confirm(t.applyArchetype)) return;

  // å¼‚æ­¥è·å–ï¼Œæ”¯æŒé™æ€å’Œå¯¼å…¥çš„åŸå‹
  const archetype = await getMergedArchetypeById(archetypeId);
  if (!archetype) {
    console.error('Archetype not found:', archetypeId);
    return;
  }
  // ... åº”ç”¨é€»è¾‘
}, [t.applyArchetype]);

// ArchetypeBrowser.tsx - å¯¼å…¥åè‡ªåŠ¨åº”ç”¨
onApplyArchetype(archetypeId, true);  // skipConfirm=true
```

**æ¶‰åŠæ–‡ä»¶**: `App.tsx`, `ArchetypeBrowser.tsx`

---

## 11. å®¡æŸ¥è¦ç‚¹ / Review Points

è¯·å®¡æŸ¥äººå‘˜é‡ç‚¹å…³æ³¨ä»¥ä¸‹æ–¹é¢ï¼š

### 11.1 åŸæœ‰åŠŸèƒ½å®¡æŸ¥

1. **ä¸šåŠ¡é€»è¾‘åˆç†æ€§**
   - åŸå‹æ¥æºç±»å‹åˆ’åˆ†æ˜¯å¦åˆç†ï¼Ÿ
   - ç”Ÿæˆæµç¨‹æ­¥éª¤æ˜¯å¦å®Œæ•´ï¼Ÿ

2. **æ•°æ®æ¨¡å‹è®¾è®¡**
   - ArchetypeOrigin æ¥å£å­—æ®µæ˜¯å¦å……åˆ†ï¼Ÿ
   - IndexedDB å­˜å‚¨ç»“æ„æ˜¯å¦åˆç†ï¼Ÿ

3. **å®‰å…¨æ€§**
   - æœ¬åœ°å­˜å‚¨æ˜¯å¦æœ‰æ•°æ®æ³„éœ²é£é™©ï¼Ÿ
   - AI è°ƒç”¨æ˜¯å¦å®‰å…¨ï¼Ÿ

4. **ç”¨æˆ·ä½“éªŒ**
   - ç”Ÿæˆè¿›åº¦åé¦ˆæ˜¯å¦æ¸…æ™°ï¼Ÿ
   - æ¥æºæ ‡è¯†æ˜¯å¦æ˜“äºç†è§£ï¼Ÿ

5. **æ‰©å±•æ€§**
   - æœªæ¥æ”¯æŒ"å‚è€ƒèµ„æ–™è§£æ"çš„æ¥å£æ˜¯å¦é¢„ç•™å……åˆ†ï¼Ÿ
   - åŸå‹ç¼–è¾‘/ç‰ˆæœ¬ç®¡ç†çš„æ‰©å±•ç©ºé—´å¦‚ä½•ï¼Ÿ

### 11.2 v1.1.0 ä¿®å¤å®¡æŸ¥

1. **LLM å…¼å®¹æ€§**
   - Provider ç‰¹å®šå¤„ç†é€»è¾‘æ˜¯å¦å®Œæ•´ï¼Ÿ
   - JSON æå– fallback æ˜¯å¦å¯é ï¼Ÿ

2. **Link æ¨¡å‹ç»Ÿä¸€**
   - æ˜¯å¦æ‰€æœ‰å†™å…¥ Link çš„åœ°æ–¹éƒ½å·²æ›´æ–°ï¼Ÿ
   - æ•°æ®è¿ç§»æ˜¯å¦å®Œæ•´ï¼ˆæ£€æŸ¥æ‰€æœ‰ Archetype æ–‡ä»¶ï¼‰ï¼Ÿ

3. **å¤šæ¨¡æ€ UI æç¤º**
   - å…¼å®¹æ€§è§„åˆ™æ˜¯å¦å‡†ç¡®åæ˜ å„ Provider èƒ½åŠ›ï¼Ÿ
   - è­¦å‘Šæç¤ºæ˜¯å¦æ¸…æ™°æ˜“æ‡‚ï¼Ÿ

4. **Action è¯„ä¼°ç»Ÿä¸€**
   - ä¸‰å¤„è¯„ä¼°é€»è¾‘æ˜¯å¦ä¸€è‡´ï¼Ÿ
   - æ—§å­—æ®µå…¼å®¹æ˜¯å¦å¿…è¦ï¼ˆæ˜¯å¦æœ‰é—ç•™æ•°æ®ï¼‰ï¼Ÿ

---

*æ–‡æ¡£ç¼–å†™: Claude Code*
*å¾…å®¡æŸ¥: [è¯·å¡«å†™å®¡æŸ¥äºº]*
